generator client {
  provider      = "prisma-client-js"
  output        = "../src/generated/prisma"
  binaryTargets = ["native", "windows"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model StockPrice {
  id            Int      @id @default(autoincrement())
  symbol        String   @db.VarChar(10)
  date          DateTime @db.Date
  open          Decimal  @db.Decimal(12, 4)
  high          Decimal  @db.Decimal(12, 4)
  low           Decimal  @db.Decimal(12, 4)
  close         Decimal  @db.Decimal(12, 4)
  volume        BigInt
  change        Decimal  @db.Decimal(12, 4)
  changePercent Decimal  @db.Decimal(12, 6)
  vwap          Decimal  @db.Decimal(12, 4)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@unique([symbol, date])
  @@index([symbol, date(sort: Desc)])
  @@map("stock_prices")
}

model FinancialRatio {
  id               Int      @id @default(autoincrement())
  symbol           String   @db.VarChar(10)
  date             DateTime @db.Date
  peRatio          Decimal? @db.Decimal(12, 4)
  priceToFcf       Decimal? @db.Decimal(12, 4)
  priceToOcf       Decimal? @db.Decimal(12, 4)
  marketCap        BigInt?
  fcf              BigInt?
  eps              Decimal? @db.Decimal(12, 4)
  revenue          BigInt?
  revenueGrowthYoy Decimal? @db.Decimal(8, 4)
  roe              Decimal? @db.Decimal(8, 4)
  debtToEquity     Decimal? @db.Decimal(12, 4)
  period           String?  @db.VarChar(20)
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt

  @@unique([symbol, date])
  @@index([symbol, date(sort: Desc)])
  @@map("financial_ratios")
}